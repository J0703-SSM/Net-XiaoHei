<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lanou.mapper.RoleMapper">

    <resultMap id="userRoleMap" type="com.lanou.domain.Role">

        <id column="PRIVILEGE_ID" property="privilegeId"/>

        <result column="pname" property="privilegeName"/>

    </resultMap>

    <resultMap id="adminRoleMap" type="com.lanou.domain.AdminForRole">

        <id column="rid" property="roleId"/>

        <result column="rname" property="roleName"/>

    </resultMap>

    <select id="findRoles"
            resultMap="userRoleMap">
        SELECT id ,PRIVILEGE_INFO.NAME pname
        FROM PRIVILEGE_INFO
    </select>

    <select id="findRoleById"
            parameterType="int"
            resultMap="userRoleMap">
        SELECT ROLE_PRIVILEGE.PRIVILEGE_ID,PRIVILEGE_INFO.NAME pname


        FROM PRIVILEGE_INFO,ROLE_INFO,ROLE_PRIVILEGE

        WHERE  ROLE_INFO.ID = #{value}
        AND ROLE_PRIVILEGE.ROLE_ID = ROLE_INFO.ID
        AND ROLE_PRIVILEGE.PRIVILEGE_ID = PRIVILEGE_INFO.ID;
    </select>

    <select id="findRoleName"
            parameterType="int"
            resultMap="adminRoleMap">
        SELECT ROLE_INFO.ID rid,ROLE_INFO.NAME rname

        FROM ADMIN_ROLE,ROLE_INFO
        WHERE ADMIN_ROLE.ADMIN_ID = #{value}
        AND ADMIN_ROLE.ROLE_ID = ROLE_INFO.ID;
    </select>

    <select id="findAllCustomRole"
            resultMap="adminRoleMap">

        SELECT ROLE_INFO.ID rid,ROLE_INFO.NAME rname FROM ROLE_INFO;
    </select>

</mapper>